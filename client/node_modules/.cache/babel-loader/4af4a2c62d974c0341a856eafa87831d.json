{"ast":null,"code":"import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport axios from 'axios';\nconst initialState = {\n  status: '',\n  user: []\n};\nexport const userLoggedIn = createAsyncThunk('user/loggedin', async details => {\n  axios.post('/user/login', details).then(res => {\n    if (res.data.msg === 'success') {\n      sessionStorage.setItem('user-e-commerce', JSON.stringify(res.data));\n      window.location.href = '/user/profile';\n    } else if (res.data.msg === 'Password or email mismatched!') {\n      alert('Password or email mismatched!');\n    } else {\n      alert('User not found');\n    }\n  }).catch(err => {\n    console.log(err);\n  });\n});\nexport const fetchUser = createAsyncThunk('user/fetched', async () => {\n  const user = JSON.parse(sessionStorage.getItem('user-e-commerce'));\n  return user;\n});\nexport const updateUser = createAsyncThunk('user/updated', async (id, userdetails, {\n  rejectWithValue\n}) => {\n  console.log({\n    id,\n    userdetails\n  });\n  console.log('hell');\n  await axios.put(`/user/${id}`, userdetails).then(res => {\n    console.log(res.data);\n  });\n});\nconst userSlice = createSlice({\n  name: 'user',\n  initialState,\n  reducer: {},\n  extraReducers: {\n    [fetchUser.pending]: (state, action) => {\n      state.status = 'Loading';\n    },\n    [fetchUser.fulfilled]: (state, action) => {\n      state.status = 'Success';\n      state.user = state.user.concat(action.payload);\n    },\n    [fetchUser.rejected]: (state, action) => {\n      state.status = 'rejected';\n    },\n    [updateUser.pending]: (state, action) => {\n      state.status = 'Loading';\n    },\n    [updateUser.fulfilled]: (state, action) => {\n      state.status = 'Success'; // state.user = state.user.concat(action.payload)\n    },\n    [updateUser.rejected]: (state, action) => {\n      state.status = 'rejected';\n    }\n  }\n});\nexport default userSlice.reducer;","map":{"version":3,"sources":["E:/Study Material/Projects/Fullstack/e-commerce/client/src/features/userSlice.js"],"names":["createSlice","createAsyncThunk","axios","initialState","status","user","userLoggedIn","details","post","then","res","data","msg","sessionStorage","setItem","JSON","stringify","window","location","href","alert","catch","err","console","log","fetchUser","parse","getItem","updateUser","id","userdetails","rejectWithValue","put","userSlice","name","reducer","extraReducers","pending","state","action","fulfilled","concat","payload","rejected"],"mappings":"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","sourcesContent":["import { createSlice,createAsyncThunk } from '@reduxjs/toolkit'\r\nimport axios from 'axios'\r\n\r\nconst initialState = {\r\n    status: '',\r\n    user: []\r\n}\r\n\r\nexport const userLoggedIn = createAsyncThunk('user/loggedin', async (details)=> {\r\n    axios.post('/user/login', details).then(res => {\r\n        if(res.data.msg === 'success'){\r\n            sessionStorage.setItem('user-e-commerce',JSON.stringify(res.data));\r\n            window.location.href = '/user/profile'\r\n        } else if(res.data.msg === 'Password or email mismatched!'){\r\n            alert('Password or email mismatched!')\r\n        } else {\r\n            alert('User not found')\r\n        }\r\n      }).catch(err => {\r\n        console.log(err)\r\n      })\r\n})\r\nexport const fetchUser = createAsyncThunk('user/fetched', async () => {\r\n    const user = JSON.parse(sessionStorage.getItem('user-e-commerce'))\r\n    return user\r\n})\r\nexport const updateUser = createAsyncThunk('user/updated', async (id,userdetails,{rejectWithValue}) => {\r\n    console.log({id,userdetails})\r\n    console.log('hell')\r\n    await axios.put(`/user/${id}`,userdetails).then( res => {\r\n        console.log(res.data)\r\n    })\r\n})\r\n\r\nconst userSlice = createSlice({\r\n    name: 'user',\r\n    initialState,\r\n    reducer: {\r\n\r\n    },\r\n    extraReducers: {\r\n        [fetchUser.pending]: (state,action) => {\r\n            state.status = 'Loading'\r\n        },\r\n        [fetchUser.fulfilled]: (state,action) => {\r\n            state.status = 'Success';\r\n            state.user = state.user.concat(action.payload)\r\n        },\r\n        [fetchUser.rejected]: (state,action) => {\r\n            state.status = 'rejected'\r\n        },\r\n        [updateUser.pending]: (state,action) => {\r\n            state.status = 'Loading'\r\n        },\r\n        [updateUser.fulfilled]: (state,action) => {\r\n            state.status = 'Success';\r\n            // state.user = state.user.concat(action.payload)\r\n        },\r\n        [updateUser.rejected]: (state,action) => {\r\n            state.status = 'rejected'\r\n        }\r\n\r\n    }\r\n})\r\n\r\nexport default userSlice.reducer"]},"metadata":{},"sourceType":"module"}