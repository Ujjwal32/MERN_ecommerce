{"ast":null,"code":"import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nexport const fetchProducts = createAsyncThunk('products/fetchProducts', async () => {\n  const products = await axios.get('/products?page=1&limit=5').then(res => {\n    return res.data.result;\n  });\n  return products;\n});\nexport const postProducts = createAsyncThunk('products/postProducts', async () => {\n  const products = await axios.post('/products', data, {\n    headers: {\n      \"x-auth\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjYwOTYxNzE4NzNlYzVhMDQxNDAxYjNiYiIsIm5hbWUiOiJVamp3YWwgQmFzbmV0IiwiZW1haWwiOiJ1amp3YWxiYXNuZXRAZW1haWwuY29tIiwiaWF0IjoxNjIwOTgzMDM3fQ.PolPg2Ho1DdLTVxueRw5UWRcdDaWpT8icwoilDJFFmY\",\n      \"Content-Type\": \"application/json\"\n    }\n  }).then(res => {\n    var _res$data;\n\n    if (((_res$data = res.data) === null || _res$data === void 0 ? void 0 : _res$data.msg) === 'Successfully added!') {\n      window.location.href('/admin/products');\n    }\n  }).catch(err => {\n    console.log(err);\n  });\n  return products;\n});\nconst initialState = {\n  status: '',\n  products: []\n};\nconst productSlice = createSlice({\n  name: \"product\",\n  initialState,\n  reducer: {},\n  extraReducers: {\n    [fetchProducts.pending]: (state, action) => {\n      state.status = 'loading';\n    },\n    [fetchProducts.fulfilled]: (state, action) => {\n      state.status = 'success';\n      state.products = state.products.concat(action.payload);\n    },\n    [fetchProducts.rejected]: (state, action) => {\n      state.status = 'failed';\n    },\n    [postProducts.fulfilled]: (state, action) => {\n      state.status = 'success';\n      state.products = state.products.concat(action.payload);\n    },\n    [postProducts.rejected]: (state, action) => {\n      state.status = 'failed';\n    }\n  }\n});\nexport default productSlice.reducer;","map":{"version":3,"sources":["E:/Study Material/Projects/Fullstack/e-commerce/client/src/features/productSlice.js"],"names":["createAsyncThunk","createSlice","axios","fetchProducts","products","get","then","res","data","result","postProducts","post","headers","msg","window","location","href","catch","err","console","log","initialState","status","productSlice","name","reducer","extraReducers","pending","state","action","fulfilled","concat","payload","rejected"],"mappings":"AAAA,SAASA,gBAAT,EAA2BC,WAA3B,QAA8C,kBAA9C;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAGA,OAAO,MAAMC,aAAa,GAAGH,gBAAgB,CAAC,wBAAD,EAA2B,YAAW;AAC/E,QAAMI,QAAQ,GAAG,MAAMF,KAAK,CAACG,GAAN,CAAU,0BAAV,EAAsCC,IAAtC,CAA4CC,GAAG,IAAI;AACtE,WAAOA,GAAG,CAACC,IAAJ,CAASC,MAAhB;AACH,GAFsB,CAAvB;AAGA,SAAOL,QAAP;AACH,CAL4C,CAAtC;AAOP,OAAO,MAAMM,YAAY,GAAGV,gBAAgB,CAAC,uBAAD,EAA0B,YAAW;AAC7E,QAAMI,QAAQ,GAAG,MAAMF,KAAK,CAACS,IAAN,CAAW,WAAX,EAAuBH,IAAvB,EAA4B;AAACI,IAAAA,OAAO,EAAE;AACzD,gBAAU,iOAD+C;AAEzD,sBAAgB;AAFyC;AAAV,GAA5B,EAGjBN,IAHiB,CAGZC,GAAG,IAAI;AAAA;;AACd,QAAG,cAAAA,GAAG,CAACC,IAAJ,wDAAUK,GAAV,MAAkB,qBAArB,EAA2C;AACzCC,MAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAqB,iBAArB;AACD;AACF,GAPoB,EAOlBC,KAPkB,CAOZC,GAAG,IAAI;AACdC,IAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACD,GAToB,CAAvB;AAUA,SAAOd,QAAP;AACH,CAZ2C,CAArC;AAeP,MAAMiB,YAAY,GAAG;AACjBC,EAAAA,MAAM,EAAE,EADS;AAEjBlB,EAAAA,QAAQ,EAAE;AAFO,CAArB;AAKA,MAAMmB,YAAY,GAAGtB,WAAW,CAAC;AAC7BuB,EAAAA,IAAI,EAAE,SADuB;AAE7BH,EAAAA,YAF6B;AAG7BI,EAAAA,OAAO,EAAE,EAHoB;AAM7BC,EAAAA,aAAa,EAAE;AACX,KAACvB,aAAa,CAACwB,OAAf,GAAyB,CAACC,KAAD,EAAOC,MAAP,KAAkB;AACvCD,MAAAA,KAAK,CAACN,MAAN,GAAe,SAAf;AACH,KAHU;AAIX,KAACnB,aAAa,CAAC2B,SAAf,GAA2B,CAACF,KAAD,EAAOC,MAAP,KAAkB;AACzCD,MAAAA,KAAK,CAACN,MAAN,GAAe,SAAf;AACAM,MAAAA,KAAK,CAACxB,QAAN,GAAiBwB,KAAK,CAACxB,QAAN,CAAe2B,MAAf,CAAsBF,MAAM,CAACG,OAA7B,CAAjB;AACH,KAPU;AAQX,KAAC7B,aAAa,CAAC8B,QAAf,GAA0B,CAACL,KAAD,EAAOC,MAAP,KAAkB;AACxCD,MAAAA,KAAK,CAACN,MAAN,GAAe,QAAf;AACH,KAVU;AAWX,KAACZ,YAAY,CAACoB,SAAd,GAA0B,CAACF,KAAD,EAAOC,MAAP,KAAkB;AACxCD,MAAAA,KAAK,CAACN,MAAN,GAAe,SAAf;AACAM,MAAAA,KAAK,CAACxB,QAAN,GAAiBwB,KAAK,CAACxB,QAAN,CAAe2B,MAAf,CAAsBF,MAAM,CAACG,OAA7B,CAAjB;AACH,KAdU;AAeX,KAACtB,YAAY,CAACuB,QAAd,GAAyB,CAACL,KAAD,EAAOC,MAAP,KAAkB;AACvCD,MAAAA,KAAK,CAACN,MAAN,GAAe,QAAf;AACH;AAjBU;AANc,CAAD,CAAhC;AA4BA,eAAeC,YAAY,CAACE,OAA5B","sourcesContent":["import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\r\nimport axios from \"axios\";\r\n\r\n\r\nexport const fetchProducts = createAsyncThunk('products/fetchProducts', async ()=> {\r\n    const products = await axios.get('/products?page=1&limit=5').then( res => {\r\n        return res.data.result\r\n    })\r\n    return products\r\n})\r\n\r\nexport const postProducts = createAsyncThunk('products/postProducts', async ()=> {\r\n    const products = await axios.post('/products',data,{headers: {\r\n        \"x-auth\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjYwOTYxNzE4NzNlYzVhMDQxNDAxYjNiYiIsIm5hbWUiOiJVamp3YWwgQmFzbmV0IiwiZW1haWwiOiJ1amp3YWxiYXNuZXRAZW1haWwuY29tIiwiaWF0IjoxNjIwOTgzMDM3fQ.PolPg2Ho1DdLTVxueRw5UWRcdDaWpT8icwoilDJFFmY\",\r\n        \"Content-Type\": \"application/json\"\r\n      }}).then(res => {\r\n        if(res.data?.msg === 'Successfully added!'){\r\n          window.location.href('/admin/products')\r\n        }\r\n      }).catch(err => {\r\n        console.log(err)\r\n      })\r\n    return products\r\n})\r\n\r\n\r\nconst initialState = {\r\n    status: '',\r\n    products: [],\r\n}\r\n\r\nconst productSlice = createSlice({\r\n    name: \"product\",\r\n    initialState,\r\n    reducer: {\r\n\r\n    },\r\n    extraReducers: {\r\n        [fetchProducts.pending]: (state,action) => {\r\n            state.status = 'loading'\r\n        },\r\n        [fetchProducts.fulfilled]: (state,action) => {\r\n            state.status = 'success'\r\n            state.products = state.products.concat(action.payload)\r\n        },\r\n        [fetchProducts.rejected]: (state,action) => {\r\n            state.status = 'failed'\r\n        },\r\n        [postProducts.fulfilled]: (state,action) => {\r\n            state.status = 'success'\r\n            state.products = state.products.concat(action.payload)\r\n        },\r\n        [postProducts.rejected]: (state,action) => {\r\n            state.status = 'failed'\r\n        }\r\n    }\r\n})\r\n\r\n\r\nexport default productSlice.reducer"]},"metadata":{},"sourceType":"module"}