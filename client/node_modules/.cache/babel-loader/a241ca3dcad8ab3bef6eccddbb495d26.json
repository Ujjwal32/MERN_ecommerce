{"ast":null,"code":"import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nexport const fetchProducts = createAsyncThunk('products/fetchProducts', async () => {\n  const products = await axios.get('/products?page=1&limit=5').then(res => {\n    return res.data.result;\n  });\n  return products;\n});\nexport const postProducts = createAsyncThunk('products/postProducts', async data => {\n  var _sessionStorage$getIt;\n\n  const token = JSON.parse((_sessionStorage$getIt = sessionStorage.getItem('user-e-commerce')) === null || _sessionStorage$getIt === void 0 ? void 0 : _sessionStorage$getIt.token);\n  const products = await axios.post('/products', data, {\n    headers: {\n      \"x-auth\": token,\n      \"Content-Type\": \"application/json\"\n    }\n  }).then(res => {\n    var _res$data;\n\n    if (((_res$data = res.data) === null || _res$data === void 0 ? void 0 : _res$data.msg) === 'Successfully added!') {\n      window.location.href = '/admin/products';\n    }\n  }).catch(err => {\n    console.log(err);\n  });\n  return products;\n});\nconst initialState = {\n  status: '',\n  products: []\n};\nconst productSlice = createSlice({\n  name: \"product\",\n  initialState,\n  reducer: {},\n  extraReducers: {\n    [fetchProducts.pending]: (state, action) => {\n      state.status = 'loading';\n    },\n    [fetchProducts.fulfilled]: (state, action) => {\n      state.status = 'success';\n      state.products = state.products.concat(action.payload);\n    },\n    [fetchProducts.rejected]: (state, action) => {\n      state.status = 'failed';\n    },\n    [postProducts.fulfilled]: (state, action) => {\n      state.status = 'success';\n      state.products = state.products.concat(action.payload);\n    },\n    [postProducts.rejected]: (state, action) => {\n      state.status = 'failed';\n    }\n  }\n});\nexport default productSlice.reducer;","map":{"version":3,"sources":["E:/Study Material/Projects/Fullstack/e-commerce/client/src/features/productSlice.js"],"names":["createAsyncThunk","createSlice","axios","fetchProducts","products","get","then","res","data","result","postProducts","token","JSON","parse","sessionStorage","getItem","post","headers","msg","window","location","href","catch","err","console","log","initialState","status","productSlice","name","reducer","extraReducers","pending","state","action","fulfilled","concat","payload","rejected"],"mappings":"AAAA,SAASA,gBAAT,EAA2BC,WAA3B,QAA8C,kBAA9C;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAGA,OAAO,MAAMC,aAAa,GAAGH,gBAAgB,CAAC,wBAAD,EAA2B,YAAW;AAC/E,QAAMI,QAAQ,GAAG,MAAMF,KAAK,CAACG,GAAN,CAAU,0BAAV,EAAsCC,IAAtC,CAA4CC,GAAG,IAAI;AACtE,WAAOA,GAAG,CAACC,IAAJ,CAASC,MAAhB;AACH,GAFsB,CAAvB;AAGA,SAAOL,QAAP;AACH,CAL4C,CAAtC;AAOP,OAAO,MAAMM,YAAY,GAAGV,gBAAgB,CAAC,uBAAD,EAA0B,MAAOQ,IAAP,IAAe;AAAA;;AACjF,QAAMG,KAAK,GAAGC,IAAI,CAACC,KAAL,0BAAWC,cAAc,CAACC,OAAf,CAAuB,iBAAvB,CAAX,0DAAW,sBAA2CJ,KAAtD,CAAd;AACA,QAAMP,QAAQ,GAAG,MAAMF,KAAK,CAACc,IAAN,CAAW,WAAX,EAAuBR,IAAvB,EAA4B;AAAES,IAAAA,OAAO,EAAE;AAC1D,gBAAUN,KADgD;AAE1D,sBAAgB;AAF0C;AAAX,GAA5B,EAGjBL,IAHiB,CAGZC,GAAG,IAAI;AAAA;;AACd,QAAG,cAAAA,GAAG,CAACC,IAAJ,wDAAUU,GAAV,MAAkB,qBAArB,EAA2C;AACzCC,MAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,iBAAvB;AACD;AACF,GAPoB,EAOlBC,KAPkB,CAOZC,GAAG,IAAI;AACdC,IAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACD,GAToB,CAAvB;AAUA,SAAOnB,QAAP;AACH,CAb2C,CAArC;AAgBP,MAAMsB,YAAY,GAAG;AACjBC,EAAAA,MAAM,EAAE,EADS;AAEjBvB,EAAAA,QAAQ,EAAE;AAFO,CAArB;AAKA,MAAMwB,YAAY,GAAG3B,WAAW,CAAC;AAC7B4B,EAAAA,IAAI,EAAE,SADuB;AAE7BH,EAAAA,YAF6B;AAG7BI,EAAAA,OAAO,EAAE,EAHoB;AAM7BC,EAAAA,aAAa,EAAE;AACX,KAAC5B,aAAa,CAAC6B,OAAf,GAAyB,CAACC,KAAD,EAAOC,MAAP,KAAkB;AACvCD,MAAAA,KAAK,CAACN,MAAN,GAAe,SAAf;AACH,KAHU;AAIX,KAACxB,aAAa,CAACgC,SAAf,GAA2B,CAACF,KAAD,EAAOC,MAAP,KAAkB;AACzCD,MAAAA,KAAK,CAACN,MAAN,GAAe,SAAf;AACAM,MAAAA,KAAK,CAAC7B,QAAN,GAAiB6B,KAAK,CAAC7B,QAAN,CAAegC,MAAf,CAAsBF,MAAM,CAACG,OAA7B,CAAjB;AACH,KAPU;AAQX,KAAClC,aAAa,CAACmC,QAAf,GAA0B,CAACL,KAAD,EAAOC,MAAP,KAAkB;AACxCD,MAAAA,KAAK,CAACN,MAAN,GAAe,QAAf;AACH,KAVU;AAWX,KAACjB,YAAY,CAACyB,SAAd,GAA0B,CAACF,KAAD,EAAOC,MAAP,KAAkB;AACxCD,MAAAA,KAAK,CAACN,MAAN,GAAe,SAAf;AACAM,MAAAA,KAAK,CAAC7B,QAAN,GAAiB6B,KAAK,CAAC7B,QAAN,CAAegC,MAAf,CAAsBF,MAAM,CAACG,OAA7B,CAAjB;AACH,KAdU;AAeX,KAAC3B,YAAY,CAAC4B,QAAd,GAAyB,CAACL,KAAD,EAAOC,MAAP,KAAkB;AACvCD,MAAAA,KAAK,CAACN,MAAN,GAAe,QAAf;AACH;AAjBU;AANc,CAAD,CAAhC;AA4BA,eAAeC,YAAY,CAACE,OAA5B","sourcesContent":["import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\r\nimport axios from \"axios\";\r\n\r\n\r\nexport const fetchProducts = createAsyncThunk('products/fetchProducts', async ()=> {\r\n    const products = await axios.get('/products?page=1&limit=5').then( res => {\r\n        return res.data.result\r\n    })\r\n    return products\r\n})\r\n\r\nexport const postProducts = createAsyncThunk('products/postProducts', async (data)=> {\r\n    const token = JSON.parse(sessionStorage.getItem('user-e-commerce')?.token)\r\n    const products = await axios.post('/products',data,{ headers: {\r\n        \"x-auth\": token,\r\n        \"Content-Type\": \"application/json\"\r\n      }}).then(res => {\r\n        if(res.data?.msg === 'Successfully added!'){\r\n          window.location.href = '/admin/products'\r\n        }\r\n      }).catch(err => {\r\n        console.log(err)\r\n      })\r\n    return products\r\n})\r\n\r\n\r\nconst initialState = {\r\n    status: '',\r\n    products: [],\r\n}\r\n\r\nconst productSlice = createSlice({\r\n    name: \"product\",\r\n    initialState,\r\n    reducer: {\r\n\r\n    },\r\n    extraReducers: {\r\n        [fetchProducts.pending]: (state,action) => {\r\n            state.status = 'loading'\r\n        },\r\n        [fetchProducts.fulfilled]: (state,action) => {\r\n            state.status = 'success'\r\n            state.products = state.products.concat(action.payload)\r\n        },\r\n        [fetchProducts.rejected]: (state,action) => {\r\n            state.status = 'failed'\r\n        },\r\n        [postProducts.fulfilled]: (state,action) => {\r\n            state.status = 'success'\r\n            state.products = state.products.concat(action.payload)\r\n        },\r\n        [postProducts.rejected]: (state,action) => {\r\n            state.status = 'failed'\r\n        }\r\n    }\r\n})\r\n\r\n\r\nexport default productSlice.reducer"]},"metadata":{},"sourceType":"module"}